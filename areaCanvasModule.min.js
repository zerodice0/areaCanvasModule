function Point(e,t){"use strict";var n=0,r=0;e&&(n=e),t&&(r=t),this.getX=function(){return n},this.getY=function(){return r},this.setX=function(e){e&&(n=e)},this.setY=function(e){e&&(r=e)},this.get=function(){return this},this.getPoint=function(){return{x:n,y:r}},this.setPoint=function(e,t){e&&(n=e),t&&(r=t)}}function AreaCanvasModule(){"use strict";function e(e){return null==e||null==e}function t(){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),n=window.navigator.userAgent,r=-1;return"Microsoft Internet Explorer"==window.navigator.appName?null!=e.exec(n)&&(r=parseFloat(RegExp.$1)):"Netscape"==window.navigator.appName&&null!=t.exec(n)&&(r=parseFloat(RegExp.$1)),r}function n(e,t){if(e<0)return!1;if(!T[e]&&T[e].length<k)for(var n=0;n<=e;n++)null==T[n]&&(T[n]=new Array);if(t&&t instanceof Point)T[e].push(t),L("new Point Object("+t.getX()+", "+t.getY()+") is add to area"+e+".");else{if(null==t.x||null==t.y)return L("param error!"),!1;T[e].push(new Point(t.x,t.y)),L("new Point Object("+t.x+", "+t.y+") is add to area"+e+".")}return i(),!0}function r(){var e=0,t=0,n=null,r=null,i=T.length,o=0;for(e=0;e<i;e++){for(n=T[e],o=n.length,C.beginPath(),t=0;t<o;t++)r=n[t],0===t?(C.moveTo(r.getX(),r.getY()),C.arc(r.getX(),r.getY(),I,0,2*Math.PI,!0),C.fillStyle=F[e],C.fill(),C.moveTo(r.getX(),r.getY())):(C.lineTo(r.getX(),r.getY()),C.moveTo(r.getX(),r.getY()),C.arc(r.getX(),r.getY(),I,0,2*Math.PI,!0),C.fillStyle=F[e],C.fill(),C.moveTo(r.getX(),r.getY()));C.lineTo(n[0].getX(),n[0].getY()),C.globalAlpha=1,C.strokeStyle=F[e],C.stroke()}return!0}function i(e){var t=null;if(C.clearRect(0,0,h.width,h.height),t=e||X.src,o(t),1==D&&(j>=0||m>=0)){var n=m>=0?m:j;s(T[n],S)}return r(),!0}function o(e){var t=M;e&&(t=e),X=new Image(v,p),X.onload=function(){h.style.background="url("+t+")",h.style.backgroundSize="100% 100%"},X.src=t}function l(e,t,n){var r=!1;if(!e instanceof Point)return r;if(!t instanceof Point)return r;if(!n instanceof Point)return r;var i=e,o=t,l=Math.min(i.getX(),o.getX()),a=Math.max(i.getX(),o.getX()),u=Math.min(i.getY(),o.getY()),g=Math.max(i.getY(),o.getY()),s=(o.getY()-i.getY())/(o.getX()-i.getX());return i.getY()==o.getY()&&i.getY()-I<n.getY()&&n.getY()<i.getY()+I&&l<n.getX()&&n.getX()<a?r=!0:i.getX()==o.getX()&&i.getX()-I<n.getX()&&n.getX()<i.getX()+I&&u<n.getY()&&n.getY()<g?r=!0:n.getY()-i.getY()-3<=s*(n.getX()-i.getX())&&s*(n.getX()-i.getX())<=n.getY()-i.getY()+3&&l<n.getX()&&n.getX()<a&&(r=!0),r}function a(){A=-1,w=-1,b=-1,y=-1}function u(e){var t=T[e];if(!t)return!1;for(var n=0,r=t[n];r;r=t[++n])(-1==w||w>r.getX())&&(w=r.getX()),(-1==A||A>r.getY())&&(A=r.getY()),(-1==b||b<r.getX())&&(b=r.getX()),(-1==y||y<r.getY())&&(y=r.getY());return!0}function g(e,t,n){C.beginPath();for(var r=0,i=n[r];i;i=n[++r])0==r?C.moveTo(i.getX(),i.getY()):C.lineTo(i.getX(),i.getY());return C.closePath(),C.isPointInPath(e,t)}function s(e,t){C.beginPath();for(var n=0,r=e[n];r;r=e[++n])0==n?C.moveTo(r.getX(),r.getY()):C.lineTo(r.getX(),r.getY());return C.closePath(),C.fillStyle=t,C.globalAlpha=B,C.fill()}var f=null,c=null,h=null,d=t(),v=640,p=480,X=null,m=-1,Y=-1,P=-1,A=-1,w=-1,b=-1,y=-1,x=-1,C=null,T=[],E=!1,I=3,k=16,R=4,M=null,F=["#EC7063","#AF7AC5","#5DADE2","#7DCEA0","#F4D03F","#EB984E"],N=!1,S="#CCAF0A",j=-1,B=.5,D=!0,L=function(e){console&&console.log&&E&&console.log(e)};this.init=function(e){return null!=e.width&&(v=e.width),null!=e.height&&(p=e.height),null!=e.debug&&(E=e.debug),null!=e.id&&(c=e.id),null!=e.pointNumberLimit&&(k=e.pointNumberLimit),null!=e.areaNumberLimit&&(R=e.areaNumberLimit),null!=e.defaultImage&&(M=e.defaultImage),null!=e.hoveredAreaColor&&(S=e.hoveredAreaColor),null!=e.hoveredAreaAlpha&&(B=e.hoveredAreaAlpha),null!=e.hoveredAreaHighlight&&(D=e.hoveredAreaHighlight),null!=e.arrayColor&&(F=function(e,t){var n=e,r=n.length,i=F.length;if(n.length<t)for(r=n.length;r<t&&r<i;r++)n.push(e[r]);return n}(e.arrayColor,R)),null!=e.isFixPointNumber&&(N=e.isFixPointNumber),f=document.getElementById(c),f?(f.innerHTML=0<d&&d<10?"<span>not support Internet Explorer "+d+". Please using Chrome Browser.</span>":'<canvas width="'+v+'" height="'+p+'"></canvas>',h=f.children[0],h?(C=h.getContext("2d"),h.onmousedown||(h.onmousedown=function(e){var t=h.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;L("click point: ("+n+", "+r+")");for(var o=0,l=T[o];l;l=T[++o]){C.beginPath();for(var g=0,s=l[g];s;s=l[++g])if(0==g?C.moveTo(s.getX(),s.getY()):C.lineTo(s.getX(),s.getY()),s.getX()-I<n&&n<s.getX()+I&&s.getY()-I<r&&r<s.getY()+I){0==e.button?(m=o,x=g):2==e.button&&l.length>3&&(e.preventDefault(),l.splice(g,1),i());break}C.closePath(),C.isPointInPath(n,r)&&m<0&&x<0&&(m=o,Y=n,P=r,a(),u(m))}}),h.oncontextmenu||(h.oncontextmenu=function(e){e.preventDefault()}),h.onmousemove||(h.onmousemove=function(e){var t=h.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=0,l=0,a=null,s=0,f=0,c=0,d=0,v=!1;for(f=0;f<T.length;f++)g(n-Y,r-P,T[f])&&(j=f,v=!0);if(a=T[m],a){if(m>=0&&x>=0)a[x].setPoint(n,r),i();else if(m>=0&&Y>=0&&P>=0){for(s=a.length,c=n-Y,d=r-P,u(m),(c<0&&w+c<=0||c>0&&b+c>=h.width)&&(c=0,!0),(d<=0&&A+d<=0||d>0&&y+d>=h.height)&&(d=0,!0),f=0;f<s;f++)o=a[f].getX()+c,l=a[f].getY()+d,a[f].setPoint(o,l);u(m),Y=n,P=r,i()}}else j>=0&&0==v?(j=-1,i()):v&&i()}),h.onmouseup||(h.onmouseup=function(e){m=-1,Y=-1,P=-1,a(),x=-1}),void(h.ondblclick||(h.ondblclick=function(e){if(N)return!1;var t=0,n=0,r=null,o=null,a=null,u=T.length,g=0,s=h.getBoundingClientRect(),f=e.clientX-s.left,c=e.clientY-s.top,d=new Point(f,c);for(t=0;t<u;t++)if(r=T[t],g=r.length,g<k){for(n=1;n<g;n++)if(o=r[n-1],a=r[n],l(o,a,d)){r.splice(n,0,d);break}o=r[n-1],a=r[0],l(o,a,d)&&r.splice(n,0,d)}i()}))):(L("Can not create Canavas Element."),!1)):(L("paramElemId is not found."),!1)},this.getAllArea=function(){return T},this.getArea=function(e){return!(e<0)&&(!!T[e]&&T[e])},this.getAreaToRelativeCoordinates=function(e){if(e<0)return!1;if(!T[e])return!1;for(var t=[],n=null,r=0;r<T[e].length;r++)n=T[e][r],t.push(new Point(n.getX()/v,n.getY()/p));return t},this.addPointToArea=function(e,t){return n(e,t)},this.addPointArrayToArea=function(e,t){if(e<0)return!1;if(e>R)return!1;if(!T[e])for(var n=0;n<=e;n++)null==T[n]&&(T[n]=new Array);for(var r in t)if(null!=t[r]&&t[r]instanceof Point)T[e].push(t[r]),L("new Point Object("+t[r].getX()+", "+t[r].getY()+") is add to area"+e+".");else{if(null==t[r].x||null==t[r].y)return L("param error!"),!1;T[e].push(new Point(t[r].x,t[r].y)),L("new Point Object("+t[r].x+", "+t[r].y+") is add to area"+e+".")}return i(),!0},this.addPushArrayToArea=function(e){var t=T.length;if(t>=R)return!1;for(var n in T[t]||(T[t]=new Array),e)if(null!=e[n]&&e[n]instanceof Point)T[t].push(e[n]),L("new Point Object("+e[n].getX()+", "+e[n].getY()+") is add to area"+t+".");else{if(null==e[n].x||null==e[n].y)return L("param error!"),!1;T[t].push(new Point(e[n].x,e[n].y)),L("new Point Object("+e[n].x+", "+e[n].y+") is add to area"+t+".")}return i(),!0},this.deletePointFromArea=function(e,t){return e<0?(L("paramAreaIndex is wrong!"),!1):t<0?(L("paramPointIndex is wrong!"),!1):null==T[e]?(L("arrayArea["+e+"] is undefined!"),!1):null==T[e][t]?(L("arrayArea["+e+"]["+t+"] is undefined!"),!1):T[e].length<4?(L("arrayArea["+e+"] has 3 points!"),!1):(T[e].splice(t,1),i(),!0)},this.setImageURL=function(e){return o(e),!0},this.refreshCanvas=function(e){return i(e),!0},this.drawRect=function(t,n,r,i,o){var l=0,a=0,u=0,g=0,s=0,f=0;return!(e(t)||e(n)||e(r)||e(i))&&(o&&o,t&&(l=t),n&&(a=n),r&&(u=r),i&&(g=i),s=u-l,f=g-a,C.beginPath(),C.strokeStyle="#8561c7",C.rect(l,a,s,f),C.stroke(),!0)}}